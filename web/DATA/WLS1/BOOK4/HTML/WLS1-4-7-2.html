<div id="module_wrapper" class="WS_workbook_wrapper WLS1-4-7-2">
  <div class="mascot wow fadeInDown">
    <img
      class="wow rubberBand"
      data-wow-iteration="infinite"
      src="./images/common/giraffe_read.png"
    />
    <span>Open your book, please.</span>
  </div>
  <div class="tabs">
    <span>part 1</span>
    <span>part 2</span>
    <span>part 3</span>
  </div>
  <div id="contents" class="contents">
    <div>
      <div class="fillbox">
        <p></p>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('him')})()"
        ></span>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('her')})()"
        ></span>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('it')})()"
        ></span>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('them')})()"
        ></span>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('you')})()"
        ></span>
        <span
          class="nomove"
          onClick="(function(){$('.fillbox p').text('me')})()"
        ></span>
      </div>
      <span class="piece1" style="top: 30px; left: 30px" />
      <span class="piece2" style="top: 415px; left: 312px" />
      <span> <img src="./DATA/WLS1/BOOK4/IMAGES/WLS1-4-7-2-1.jpg" /></span>
    </div>
    <div>
      <span> <img src="./DATA/WLS1/BOOK4/IMAGES/WLS1-4-7-2-2.jpg" /></span>
      <span class="ans">
        <span class="ring" style="top: 85px; left: 224px" />
        <span class="ring" style="top: 197px; left: 240px" />
        <span class="ring" style="top: 224px; left: 153px" />
        <span class="ring" style="top: 258px; left: 136px" />
        <span class="ring" style="top: 368px; left: 117px" />
        <span class="ring" style="top: 405px; left: 198px" />
      </span>
      <span class="selection">
        <span class="ring nomove s1" style="top: 85px; left: 179px" />
        <span class="ring nomove s1" style="top: 85px; left: 224px" />
        <span class="ring nomove s2" style="top: 197px; left: 240px" />
        <span class="ring nomove s2" style="top: 197px; left: 280px" />
        <span class="ring nomove s3" style="top: 224px; left: 98px" />
        <span class="ring nomove s3" style="top: 224px; left: 153px" />
        <span class="ring nomove s4" style="top: 258px; left: 136px" />
        <span class="ring nomove s4" style="top: 258px; left: 189px" />
        <span class="ring nomove s5" style="top: 368px; left: 117px" />
        <span class="ring nomove s5" style="top: 368px; left: 168px" />
        <span class="ring nomove s6" style="top: 405px; left: 146px" />
        <span class="ring nomove s6" style="top: 405px; left: 198px" />
      </span>
      <audio
        class="a1"
        preload="auto"
        src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-2.mp3"
      />
    </div>
    <div>
      <div class="bingo_wrapper">
        <span class="reset nomove wow fadeIn">Reset</span>
        <span class="start nomove">Start</span>
        <span class="bin"></span>
        <div class="board" />
      </div>
      <span
        class="sensor nomove"
        style="top: 22px; left: 60px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="0"
          et="2.6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 86px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="2.6"
          et="4.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 116px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="4.2"
          et="6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 146px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="6"
          et="8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 175px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="8"
          et="9.5"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 203px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="9.5"
          et="11.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 232px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="11.2"
          et="13.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 262px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="13.1"
          et="14.6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 289px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="14.6"
          et="16.3"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 22px; left: 318px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="16.3"
          et="18.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 60px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="18.1"
          et="20.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 87px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="20.1"
          et="22"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 117px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="22"
          et="23.6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 151px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="23.8"
          et="25.5"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 181px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="25.5"
          et="27.3"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 210px; width: 25px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="27.3"
          et="29.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 240px; width: 39px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="29.2"
          et="31.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 281px; width: 39px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="31.1"
          et="33"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 52px; left: 319px; width: 39px !important; height: 28px"
      >
        <audio
          preload="auto"
          st="33"
          et="34.4"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 83px; left: 78px; width: 69px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="34.4"
          et="36.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 105px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="36.2"
          et="38"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 127px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="38"
          et="39.8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 148px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="40"
          et="41.8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 169px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="42"
          et="44.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 191px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="44.1"
          et="46.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 212px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="46.1"
          et="48.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 233px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="48.1"
          et="49.8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 255px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="50"
          et="52"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 274px; left: 69px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="52"
          et="53.7"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 83px; left: 165px; width: 69px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="53.7"
          et="55.6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 105px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="55.6"
          et="57.8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 127px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="57.8"
          et="59.9"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 148px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="60.1"
          et="62.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 169px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="62.2"
          et="64.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 191px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="64.2"
          et="66.5"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 212px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="66.5"
          et="68.7"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 233px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="68.9"
          et="70.9"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 255px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="71.2"
          et="73.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 274px; left: 161px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="73.2"
          et="75.1"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 83px; left: 259px; width: 69px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="75.1"
          et="76.9"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 105px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="77.2"
          et="79"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 127px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="79"
          et="80.9"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 148px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="80.9"
          et="83"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 169px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="83"
          et="85.2"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 191px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="85.2"
          et="87.3"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 212px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="87.3"
          et="89.6"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 233px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="89.6"
          et="91.7"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 255px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="91.7"
          et="93.7"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 274px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="93.9"
          et="95.8"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span
        class="sensor nomove"
        style="top: 297px; left: 252px; width: 80px !important; height: 18px"
      >
        <audio
          preload="auto"
          st="95.8"
          et="97.9"
          src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
        />
      </span>
      <span> <img src="./DATA/WLS1/BOOK4/IMAGES/WLS1-4-7-2-3.jpg" /></span>
      <audio
        class="a1"
        preload="auto"
        src="./DATA/WLS1/BOOK4/AUDIO/WLS1-4-7-2-3.mp3"
      />
    </div>
  </div>
  <div class="sideTool">
    <div class="eye"></div>
    <div class="fit"></div>
    <div class="speaker a1"></div>
  </div>
  <div class="assetsPreload">
    <img src="./images/common/btn_eye.png" />
    <img src="./images/common/btn_speaker.png" />
    <img src="./images/common/btn_fit.png" />
    <img src="./images/common/giraffe_read.png" />
  </div>
</div>
<script>
  $(document).ready(function () {
    //載入完成要執行init
    $("#module_wrapper")
      .unbind()
      .bind("compLoaded", function () {
        //
        $("#module_wrapper .selection")
          .find(".ring")
          .each(function () {
            $(this)
              .unbind()
              .bind("click", function () {
                //do someing
                var classset = $(this).attr("class");
                classset = classset.replace("ring", "");
                classset = classset.replace("nomove", "");
                classset = classset.replace("active", "");
                classset = classset.replace("  ", "");
                classset = classset.replace(" ", "");
                $("#module_wrapper .selection")
                  .find("." + classset + ".active")
                  .removeClass("active");
                $(this).addClass("active");
              });
          });
        //lowlag audios
        var tempSound = $(this).find("audio");
        if (tempSound.length > 0) {
          tempSound.each(function () {
            if ($SFXNameAr.indexOf($(this).attr("src")) == -1) {
              $SFXNameAr.push($(this).attr("src"));
              $SFXAr.push(new Audio($(this).attr("src")));
            }
          });
        }
        //sensor
        $(".sensor")
          .unbind()
          .bind("mousedown", function (ev) {
            click.x = ev.clientX;
            click.y = ev.clientY;
          })
          .bind("mouseup", function (ev) {
            if (click.x == ev.clientX && click.y == ev.clientY) {
              rootSoundEffectName(
                $(this).find("audio").attr("src"),
                false,
                parseInt($(this).find("audio").attr("st")),
                parseInt($(this).find("audio").attr("et"))
              );
            }
          });

        //hammer
        trigHammer();

        //tabs
        $(".tabs > span")
          .unbind()
          .bind("click", function () {
            if (!$(this).hasClass("selected")) {
              if (!lowlaged) {
                lowlaged = true;
                lowlagSFX();
                activeSFX();
              }
              //init
              $(this)
                .addClass("selected")
                .siblings(".selected")
                .removeClass("selected");
              openContent($(this).index());
            }
          });
        if ($(".tabs > span").length < 2) {
          $(".tabs").hide();
        }
        //
        $(".WLS1-1-8-1 .ans1,.WLS1-1-8-1 .ans2").hide();
        $(".WLS1-1-8-1 .eye1")
          .unbind()
          .bind("click", function () {
            $(this).toggleClass("active");
            if ($(this).hasClass("active")) {
              $(".WLS1-1-8-1 .ans1").fadeIn();
            } else {
              $(".WLS1-1-8-1 .ans1").hide();
            }
          });
        $(".WLS1-1-8-1 .eye2")
          .unbind()
          .bind("click", function () {
            $(this).toggleClass("active");
            if ($(this).hasClass("active")) {
              $(".WLS1-1-8-1 .ans2").fadeIn();
            } else {
              $(".WLS1-1-8-1 .ans2").hide();
            }
          });

        //sidetool
        $(".sideTool > div.speaker.a1")
          .unbind()
          .bind("click", function () {
            $(this)
              .toggleClass("active")
              .siblings(".speaker.active")
              .removeClass("active");
            if ($(this).hasClass("active")) {
              rootSoundEffectName(
                $(".contents > div.selected").find("audio.a1").attr("src"),
                true
              );
            } else {
              closePlayer();
            }
          });

        $(".sideTool > div.eye")
          .unbind()
          .bind("click", function () {
            $(this).toggleClass("active");
            $(".contents > div.selected").toggleClass("showANS");
          });
        $(".sideTool > div.fit")
          .unbind()
          .bind("click", function () {
            $(this).toggleClass("active");
            if ($(this).hasClass("active")) {
              //fit height
              var currentH = $(".contents > div.selected").height();
              var fitH = $("#root").height() * 0.9 - 50;
              var scaleTo = fitH / currentH;
              insideRatio = scaleTo;
              var ft = ($("#root").height() - currentH) / 2 / stageRatio - 25;
              var styles = {
                transform: "scale(" + scaleTo + ")",
                top: ft,
                left: 200,
              };
              $(".contents > div.selected").css(styles);
            } else {
              insideRatio = 1;
              //origin

              var styles = {
                transform: "none",
              };
              $(".contents > div.selected").css(styles);
            }
          });

        //init

        $(this)
          .addClass("loaded")
          .delay(500)
          .queue(function () {
            $(".tabs > span").eq(0).click();
            $(this).dequeue().unbind();
          });
        deactiveLoading();
      });

    $("#module_wrapper #contents")
      .find("img")
      .each(function (i) {
        $(this).clone().appendTo("#module_wrapper .assetsPreload");
      });
    //check loading
    checkCompLoading("#module_wrapper");
  });

  var lowlaged = false;
  var lastPosX = 0;
  var lastPosY = 0;
  var isDragging = false;
  var $elem = new Object();
  var insideRatio = 1;

  var trigHammer = function () {
    //hammer
    var myElement = document.getElementById("contents");
    var mc = new Hammer(myElement);
    mc.get("pan").set({ direction: Hammer.DIRECTION_ALL });
    mc.on("pan", function (ev) {
      handleDrag(ev);
    });
  };

  var handleDrag = function (ev) {
    var elem = ev.target;

    if (!isDragging && !$(elem).hasClass("nomove")) {
      isDragging = true;
      $elem = elem;
      lastPosX = elem.offsetLeft;
      lastPosY = elem.offsetTop;
    }

    if (elem == $elem && !$(elem).hasClass("nomove")) {
      var posX = ev.deltaX / stageRatio + lastPosX;
      var posY = ev.deltaY / stageRatio + lastPosY;
      if ($(elem).hasClass("piece1") || $(elem).hasClass("piece2")) {
        posX = ev.deltaX / stageRatio / insideRatio + lastPosX;
        posY = ev.deltaY / stageRatio / insideRatio + lastPosY;
      }

      elem.style.left = posX + "px";
      elem.style.top = posY + "px";
    }

    if (ev.isFinal) {
      isDragging = false;
      $elem = new Object();
    }
  };

  var openContent = function (id) {
    resetAudio();
    resetTool();
    $(".contents > div")
      .removeClass("showANS")
      .eq(id)
      .addClass("selected")
      .siblings(".selected")
      .removeClass("selected");
    resetElem($(".contents > div.selected"));
    //show side tool btn
    if ($(".contents > div.selected").find(".ans").length > 0) {
      $(".sideTool > div.eye").fadeIn();
    }
    if ($(".contents > div.selected").find("audio.a1").length > 0) {
      $(".sideTool > div.speaker.a1").fadeIn();
    }
    if ($(".contents > div.selected").find("audio.a2").length > 0) {
      $(".sideTool > div.speaker.a2").fadeIn();
    }
    if (
      $(".contents > div.selected").height() >
      $("#root").height() * 0.9 - 50
    ) {
      $(".sideTool > div.fit").fadeIn();
    }
    //bingo
    if (id == 2) {
      $(".contents > div.selected").find(".board").empty();
      var ref = $(".contents > div.selected").find(".sensor");
      var refArray = [];
      for (var k = 0; k < ref.length; k++) {
        refArray.push(k);
      }
      shuffle(refArray);
      $(".contents > div.selected")
        .find(".bingo_wrapper .start")
        .unbind()
        .bind("click", function () {
          var amount = $(".contents > div.selected")
            .find(".board")
            .find("p").length;
          if (amount == 0) {
            $(".contents > div.selected")
              .find(".bingo_wrapper .start")
              .text("Next");
            $(".contents > div.selected")
              .find(".bingo_wrapper .reset")
              .addClass("active");
          } else if (amount == 24) {
            $(".contents > div.selected")
              .find(".bingo_wrapper .start")
              .text("End");
          } else if (amount >= 25) {
            return false;
          }
          ref.eq(refArray[amount]).mousedown().mouseup();
          $(".contents > div.selected")
            .find(".board")
            .append(`<p>${refArray[amount] + 1}</p>`);
          $(".contents > div.selected")
            .find(".bingo_wrapper .bin")
            .text(refArray[amount] + 1);
        });
      $(".contents > div.selected")
        .find(".bingo_wrapper .reset")
        .unbind()
        .bind("click", function () {
          $(this).removeClass("active");
          $(".contents > div.selected").find(".board").empty();
          $(".contents > div.selected")
            .find(".bingo_wrapper .start")
            .text("Start");
          $(".contents > div.selected").find(".bingo_wrapper .bin").text("");
          shuffle(refArray);
        });
    }
  };

  var resetElem = function (elem) {
    var ft = ($("#root").height() - elem.height()) / 2 / stageRatio - 25;
    if (ft < 50) {
      ft = 50;
    }
    var styles = {
      transform: "none",
      top: ft,
      left: 200,
    };
    elem.css(styles);
  };

  var resetTool = function () {
    $(".sideTool > div").removeClass("active").hide();
    $(".WLS1-1-8-1 .ans1,.WLS1-1-8-1 .ans2").hide();
    $(".WLS1-1-8-1 .eye1,.WLS1-1-8-1 .eye2").removeClass("active");
  };
</script>
